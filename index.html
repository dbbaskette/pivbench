<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>PivBench by dbbaskette</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">PivBench</h1>
      <h2 class="project-tagline">Automation of the TPC-DS benchmark for Pivotal HAWQ.</h2>
      <a href="https://github.com/dbbaskette/pivbench" class="btn">View on GitHub</a>
      <a href="https://github.com/dbbaskette/pivbench/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/dbbaskette/pivbench/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="pivbench" class="anchor" href="#pivbench" aria-hidden="true"><span class="octicon octicon-link"></span></a>pivbench</h1>

<h3>
<a id="pivotal-hawq-tpc-ds-benchmarking-tool" class="anchor" href="#pivotal-hawq-tpc-ds-benchmarking-tool" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pivotal HAWQ TPC-DS Benchmarking Tool</h3>

<h2></h2>

<p>Automation of the TPC-DS benchmark for Pivotal HAWQ.</p>

<p>The application is broken into functions that are run independently.  Since some modules require feedback just after executions, it is recommended you run these with nohup python pivbench.py.   Enter the information that is required, hit CTRL-Z and then bg 1 to background the process.   Alternatively, you can pass the clear-text password(s) required via the command line options (this would only be recommended in test environments)</p>

<ul>
<li>
<strong>gen (Generate)</strong> - This takes the size and HDFS target of the benchmark data and leverages MapReduce to create the datafiles.   It's a patched version of the generator included with Hortonworks Hive-Bench.  It also changes the Replication factor to 2 for the directory to save capacity.<br>
</li>
<li>
<strong>load</strong> - This module creates the HAWQ tables and PXF External tables and moves the Raw - Pipe Delimited data into HAWQ.  For the larger fact tables, non-partitioned tables (labeled as _nopart) as created to speed the data load.</li>
<li>
<strong>part (Partition)</strong> - Takes number of partitions as a parameter and creates Partitioned versions of the larger fact tables with the _nopart name removed.  It then does a insert into X select * from Y to load the tables.  This method allows for easier modification in the event new partition sizes are needed.</li>
<li>
<strong>analyze</strong> - This module will analyze all the fact and diminsion tables.</li>
<li> <strong>query</strong> - Runs any single query, or all 99 TPC-DS queries against the database and records the elapsed times of each.  It also clears the buffers and cache on all cluster nodes before every query executes.   You can use --num to run 1 or more queries, or use --set to predefine a set of queries.   Current options are 'all', and 'hive' which either run all queries, or just the hive compatible ones.</li>
</ul>

<pre><code>2015-05-30 10:33:15,539 INFO Executing HAWQ Queries
2015-05-30 10:33:15,540 INFO Running all Queries
2015-05-30 10:33:15,539 INFO ---------------------------------
2015-05-30 10:40:19,821 INFO Query: query_55   Execution Time(s): xxx.xx  Rows Returned: 100
2015-05-30 10:45:00,443 INFO Query: query_30   Execution Time(s): xxx.xx  Rows Returned: 100
2015-05-30 11:14:15,389 INFO Query: query_79   Execution Time(s): xxx.xx  Rows Returned: 100
2015-05-30 11:18:12,482 INFO Query: query_92   Execution Time(s): xxx.xx  Rows Returned: 1
2015-05-30 11:25:39,422 INFO Query: query_85   Execution Time(s): xxx.xx  Rows Returned: 71
</code></pre>

<h2>
<a id="pre-reqs" class="anchor" href="#pre-reqs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pre-Reqs</h2>

<p>yum -y install python-devel
yum -y install postgresql-devel</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/dbbaskette/pivbench">PivBench</a> is maintained by <a href="https://github.com/dbbaskette">dbbaskette</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

